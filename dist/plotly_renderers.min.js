(function(){(function(t){"object"==typeof exports&&"object"==typeof module?t(require("jquery"),require("plotly.js")):"function"==typeof define&&define.amd?define(["jquery","plotly.js"],t):t(jQuery,Plotly)})(function(t,e){var o,n;return o=function(o,n,l){return null==o&&(o={}),null==n&&(n={}),null==l&&(l=!1),function(r,i){var a,s,h,u,p,g,y,d,c,f,v,m,w,x,b,j;if(g={localeStrings:{vs:"vs",by:"by"},plotly:{},plotlyConfig:{}},i=t.extend(!0,{},g,i),w=r.getRowKeys(),a=r.getColKeys(),0===(j=l?a:w).length&&j.push([]),0===(p=l?w:a).length&&p.push([]),y=r.aggregatorName,r.valAttrs.length&&(y+="("+r.valAttrs.join(", ")+")"),u=j.map(function(e){var n,i,a,s,h,u,g;for(g=[],a=[],i=0,s=p.length;i<s;i++)n=p[i],u=parseFloat(r.getAggregator(l?n:e,l?e:n).value()),g.push(isFinite(u)?u:null),a.push(n.join("-")||" ");if(h={name:e.join("-")||y},"pie"===o.type?(h.values=g,h.labels=a.length>1?a:[y]):(h.x=l?g:a,h.y=l?a:g),o.extendFunctions)for(var d in o.extendFunctions)o.extendFunctions.hasOwnProperty(d)&&(h[d]=o.extendFunctions[d](h));return t.extend(h,o)}),l?(c=r.rowAttrs.join("-"),d=r.colAttrs.join("-")):(c=r.colAttrs.join("-"),d=r.rowAttrs.join("-")),b=y,""!==c&&(b+=" "+i.localeStrings.vs+" "+c),""!==d&&(b+=" "+i.localeStrings.by+" "+d),v={title:b,hovermode:"closest",width:window.innerWidth/1.4,height:window.innerHeight/1.4-50},"pie"===o.type){for(f in s=Math.ceil(Math.sqrt(u.length)),x=Math.ceil(u.length/s),v.grid={columns:s,rows:x},u)(h=u[f]).domain={row:Math.floor(f/s),column:f-s*Math.floor(f/s)},u.length>1&&(h.title=h.name);1===u[0].labels.length&&(v.showlegend=!1)}else v.xaxis={title:l?y:null,automargin:!0},v.yaxis={title:l?null:y,automargin:!0};return m=t("<div>").appendTo(t("body")),e.newPlot(m[0],u,t.extend(v,n,i.plotly),i.plotlyConfig),m.detach()}},n=function(){return function(o,n){var l,r,i,a,s,h,u,p,g,y,d,c,f,v;for(a={localeStrings:{vs:"vs",by:"by"},plotly:{},plotlyConfig:{}},n=t.extend(!0,{},a,n),0===(f=o.getRowKeys()).length&&f.push([]),0===(r=o.getColKeys()).length&&r.push([]),i={x:[],y:[],text:[],type:"scatter",mode:"markers"},s=0,p=f.length;s<p;s++)for(c=f[s],h=0,g=r.length;h<g;h++)l=r[h],null!=(v=o.getAggregator(c,l).value())&&(i.x.push(l.join("-")),i.y.push(c.join("-")),i.text.push(v));return u={title:o.rowAttrs.join("-")+" vs "+o.colAttrs.join("-"),hovermode:"closest",xaxis:{title:o.colAttrs.join("-"),automargin:!0},yaxis:{title:o.rowAttrs.join("-"),automargin:!0},width:window.innerWidth/1.5,height:window.innerHeight/1.4-50},y=t("<div>",{style:"display:none;"}).appendTo(t("body")),d=t("<div>").appendTo(y),e.newPlot(d[0],[i],t.extend(u,n.plotly),n.plotlyConfig),d.detach(),y.remove(),d}},t.pivotUtilities.makePlotlyChart=o,t.pivotUtilities.makePlotlyScatterChart=n,t.pivotUtilities.plotly_renderers={"Horizontal Bar Chart":o({type:"bar",orientation:"h"},{barmode:"group"},!0),"Horizontal Stacked Bar Chart":o({type:"bar",orientation:"h"},{barmode:"relative"},!0),"Bar Chart":o({type:"bar"},{barmode:"group"}),"Stacked Bar Chart":o({type:"bar"},{barmode:"relative"}),"Line Chart":o(),"Area Chart":o({stackgroup:1}),"Scatter Chart":n(),"Multiple Pie Chart":o({type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)}})}).call(this);
